(()=>{var e={};e.id=663,e.ids=[663],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},5511:e=>{"use strict";e.exports=require("crypto")},5435:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>x,routeModule:()=>p,serverHooks:()=>I,workAsyncStorage:()=>g,workUnitAsyncStorage:()=>m});var n={};t.r(n),t.d(n,{DELETE:()=>l,GET:()=>u,PUT:()=>c});var s=t(5367),a=t(9088),i=t(3807),o=t(4070),d=t(9081);async function u(e,{params:r}){let t=(0,d.getCurrentUser)(e);if(!t)return o.NextResponse.json({error:"Unauthorized"},{status:401});let n=parseInt(r.id),s=[{id:1,userId:1,name:"Charizard",setName:"Base Set",cardNumber:"4/102",condition:"NM",imageUrl:null,createdAt:new Date("2025-03-15").toISOString(),updatedAt:new Date("2025-03-30").toISOString()},{id:2,userId:1,name:"Pikachu",setName:"Jungle",cardNumber:"60/64",condition:"NM",imageUrl:null,createdAt:new Date("2025-03-20").toISOString(),updatedAt:new Date("2025-03-30").toISOString()}],a=[{id:1,cardId:1,priceCharting:350,collectr:375.5,fetchedAt:new Date("2025-03-30").toISOString()},{id:2,cardId:2,priceCharting:15.5,collectr:18.25,fetchedAt:new Date("2025-03-30").toISOString()}],i=s.find(e=>e.id===n&&e.userId===t.id);if(!i)return o.NextResponse.json({error:"Card not found"},{status:404});let u=a.find(e=>e.cardId===n),c=[{cardId:1,date:"2025-03-15",priceCharting:345,collectr:370},{cardId:1,date:"2025-03-22",priceCharting:348.5,collectr:372.25},{cardId:1,date:"2025-03-30",priceCharting:350,collectr:375.5},{cardId:2,date:"2025-03-20",priceCharting:14.75,collectr:17.5},{cardId:2,date:"2025-03-30",priceCharting:15.5,collectr:18.25}].filter(e=>e.cardId===n);return o.NextResponse.json({...i,priceCharting:u?.priceCharting||null,collectr:u?.collectr||null,priceHistory:c})}async function c(e,{params:r}){let t=(0,d.getCurrentUser)(e);if(!t)return o.NextResponse.json({error:"Unauthorized"},{status:401});let n=parseInt(r.id),s=[{id:1,userId:1,name:"Charizard",setName:"Base Set",cardNumber:"4/102",condition:"NM",imageUrl:null,createdAt:new Date("2025-03-15").toISOString(),updatedAt:new Date("2025-03-30").toISOString()},{id:2,userId:1,name:"Pikachu",setName:"Jungle",cardNumber:"60/64",condition:"NM",imageUrl:null,createdAt:new Date("2025-03-20").toISOString(),updatedAt:new Date("2025-03-30").toISOString()}];try{let r=await e.json(),a=s.findIndex(e=>e.id===n&&e.userId===t.id);if(-1===a)return o.NextResponse.json({error:"Card not found"},{status:404});return s[a]={...s[a],name:r.name||s[a].name,setName:r.set||s[a].setName,cardNumber:r.number||s[a].cardNumber,condition:r.condition||s[a].condition,imageUrl:r.imageUrl||s[a].imageUrl,updatedAt:new Date().toISOString()},o.NextResponse.json(s[a])}catch(e){return console.error("Error updating card:",e),o.NextResponse.json({error:"Internal server error"},{status:500})}}async function l(e,{params:r}){let t=(0,d.getCurrentUser)(e);if(!t)return o.NextResponse.json({error:"Unauthorized"},{status:401});let n=parseInt(r.id),s=[{id:1,userId:1,name:"Charizard",setName:"Base Set",cardNumber:"4/102",condition:"NM",imageUrl:null,createdAt:new Date("2025-03-15").toISOString(),updatedAt:new Date("2025-03-30").toISOString()},{id:2,userId:1,name:"Pikachu",setName:"Jungle",cardNumber:"60/64",condition:"NM",imageUrl:null,createdAt:new Date("2025-03-20").toISOString(),updatedAt:new Date("2025-03-30").toISOString()}],a=s.findIndex(e=>e.id===n&&e.userId===t.id);return -1===a?o.NextResponse.json({error:"Card not found"},{status:404}):(s.splice(a,1),o.NextResponse.json({message:"Card deleted successfully"}))}let p=new s.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/cards/[id]/route",pathname:"/api/cards/[id]",filename:"route",bundlePath:"app/api/cards/[id]/route"},resolvedPagePath:"/home/ubuntu/pokevalue-tracker/src/app/api/cards/[id]/route.ts",nextConfigOutput:"",userland:n}),{workAsyncStorage:g,workUnitAsyncStorage:m,serverHooks:I}=p;function x(){return(0,i.patchFetch)({workAsyncStorage:g,workUnitAsyncStorage:m})}},5276:()=>{},2124:()=>{},9081:(e,r,t)=>{"use strict";t.r(r),t.d(r,{DELETE:()=>u,POST:()=>d,getCurrentUser:()=>c});var n=t(4070),s=t(6623),a=t(2095);let i=[{id:1,email:"user@example.com",password:"password123",name:"Demo User"}],o={};async function d(e){try{let{email:r,password:t}=await e.json(),d=i.find(e=>e.email===r);if(!d||d.password!==t)return n.NextResponse.json({error:"Invalid email or password"},{status:401});let u=(0,a.A)(),c=new Date;c.setDate(c.getDate()+7),o[u]={userId:d.id,expiresAt:c},(0,s.UL)().set({name:"session_id",value:u,httpOnly:!0,path:"/",expires:c,secure:!0});let{password:l,...p}=d;return n.NextResponse.json({message:"Login successful",user:p})}catch(e){return console.error("Login error:",e),n.NextResponse.json({error:"Internal server error"},{status:500})}}async function u(){let e=s.UL().get("session_id")?.value;return e&&o[e]&&delete o[e],(0,s.UL)().delete("session_id"),n.NextResponse.json({message:"Logout successful"})}function c(e){let r=e.cookies.get("session_id")?.value;if(!r||!o[r])return null;let t=o[r];if(new Date>t.expiresAt)return delete o[r],null;let n=i.find(e=>e.id===t.userId);if(!n)return null;let{password:s,...a}=n;return a}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[803,654,989],()=>t(5435));module.exports=n})();